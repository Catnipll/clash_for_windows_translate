module.exports=function(c){function a(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return c[d].call(e.exports,e,e.exports,a),e.l=!0,e.exports}var b={};return a.m=c,a.c=b,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,d){var c,e;if(1&d&&(b=a(b)),8&d)return b;if(4&d&&"object"==typeof b&&b&&b.__esModule)return b;if(c=Object.create(null),a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:b}),2&d&&"string"!=typeof b)for(e in b)a.d(c,e,function(a){return b[a]}.bind(null,e));return c},a.n=function(b){var c=b&&b.__esModule?function(){return b.default}:function(){return b};return a.d(c,"a",c),c},a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.p="",a(a.s=5)}([function(a){a.exports=require("electron")},function(a,c,b){a.exports=b(6)},function(b){function a(c,h,i,d,e,f,g){try{var a=c[f](g),b=a.value}catch(a){return void i(a)}a.done?h(b):Promise.resolve(b).then(d,e)}b.exports=function(b){return function(){var c=this,d=arguments;return new Promise(function(f,g){function e(b){a(i,f,g,e,h,"next",b)}function h(b){a(i,f,g,e,h,"throw",b)}var i=b.apply(c,d);e(void 0)})}}},function(a){a.exports=require("path")},function(a){a.exports=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}},function(C,B,c){"use strict";var u,h,t,k,s,r,a,p,e,g,i,l,v,b,d,j,f,m,A,q;function z(a,d){var b=Object.keys(a),c;return Object.getOwnPropertySymbols&&(c=Object.getOwnPropertySymbols(a),d&&(c=c.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),b.push.apply(b,c)),b}function o(c){for(var a,b=1;b<arguments.length;b++)a=null==arguments[b]?{}:arguments[b],b%2?z(Object(a),!0).forEach(function(b){r()(c,b,a[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))});return c}function y(){var m=w().bounds,r=void 0===m?{}:m,q,s,l,t;(b=new a.BrowserWindow(o({height:603,width:850,minWidth:850,minHeight:603,backgroundColor:"#f5f5f5",useContentSize:!0,show:!1,minimizable:!0,frame:!1,titleBarStyle:"hidden",webPreferences:{nodeIntegration:!0,webSecurity:!0,nodeIntegrationInWorker:!1,enableRemoteModule:!0,contextIsolation:!1,preload:g.resolve(g.join(__dirname,"preload.js"))}},r))).setMenu(null),b.webContents.on("will-navigate",function(a){return a.preventDefault()}),b.loadURL(A,{userAgent:"ClashforWindows/".concat(a.app.getVersion())}),b.on("hide",function(){b.webContents.send("window-event","hide")}),b.on("show",function(){"darwin"===process.platform&&a.app.dock.show(),b.webContents.send("window-event","show"),b.setBounds(x(b.getBounds()))}),b.on("close",function(c){return a.app.isQuiting?(a.globalShortcut.unregisterAll(),a.app.exit()):(c.preventDefault(),b.webContents.send("window-event","close"),b.hide(),"darwin"===process.platform&&a.app.dock.hide(),n()),!1}),b.on("session-end",function(a){a.preventDefault(),b.webContents.send("app-exit")}),b.webContents.on("render-process-gone",function(){var c=k()(h.a.mark(function f(i,g){var c,d,e;return h.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(c=g.reason,"darwin"!==process.platform){f.next=3;break}return f.abrupt("return");case 3:if("crashed"!==c){f.next=10;break}return d={type:"error",title:"Clash for Windows",message:"仪表盘崩溃啦!",buttons:["重新载入","退出"]},f.next=7,a.dialog.showMessageBox(b,d);case 7:e=f.sent,0===e.response?(a.app.relaunch(),a.app.exit(0)):a.app.quit();case 10:case"end":return f.stop()}},f)}));return function(){return c.apply(this,arguments)}}()),b.setTouchBar(new p({items:[new e({label:"通用",backgroundColor:"#505050",click:function(){b.webContents.send("menu-item-change","general")}}),new e({label:"代理",backgroundColor:"#505050",click:function(){b.webContents.send("menu-item-change","proxy")}}),new e({label:"配置文件",backgroundColor:"#505050",click:function(){b.webContents.send("menu-item-change","server")}}),new e({label:"日志",backgroundColor:"#505050",click:function(){b.webContents.send("menu-item-change","log")}}),new e({label:"连接",backgroundColor:"#505050",click:function(){b.webContents.send("menu-item-change","connection")}}),new e({label:"设置",backgroundColor:"#505050",click:function(){b.webContents.send("menu-item-change","setting")}}),new e({label:"反馈",backgroundColor:"#505050",click:function(){b.webContents.send("menu-item-change","about")}})]})),a.powerMonitor.on("suspend",function(){b.webContents.send("power-event","suspend")}),a.powerMonitor.on("resume",function(){b.webContents.send("power-event","resume")}),q=a.nativeImage.createFromPath(c(3).join(__static,"imgs","logo_64_eyes.png")).resize({width:24,height:24}),q.setTemplateImage(!0),s=g.join(__static,"tray_normal.ico"),(f=new a.Tray("darwin"===process.platform?q:s)).setToolTip("Clash for Windows"),f.on("click",function(){b.setBounds(x(b.getBounds())),b.show()}),a.ipcMain.on("cleanup-done",function(){n(),a.app.isQuiting=!0,a.app.quit()}),a.ipcMain.on("status-changed",function(b,a){try{"darwin"!==process.platform&&f.setImage(a)}catch(a){}}),a.ipcMain.on("show-notification",function(h,b){var e=g.join(global.__static,"imgs/logo_64.png"),c=new a.Notification(o(o({},b),{},{icon:"darwin"===process.platform?null:a.nativeImage.createFromPath(e)})),f=b.folder,d=b.url;f&&c.on("click",function(){a.shell.openPath(b.folder)}),d&&c.on("click",function(){a.shell.openExternal(d)}),c.show()}),l=a.Menu.buildFromTemplate([{label:"仪表盘",click:function(){return b.show()}},{label:"运行托盘脚本",click:function(){return b.webContents.send("run-tray-script")}},{type:"separator"},{label:"系统代理",type:"checkbox",id:"system-proxy",enabled:!1,click:function(a){var c=a.checked;b.webContents.send("system-proxy-changed",c)}},{label:"混合",type:"checkbox",id:"mixin",enabled:!1,click:function(a){var c=a.checked;b.webContents.send("mixin-changed",c)}},{type:"separator"},{label:"代理模式",id:"mode",enabled:!1},{label:"全局",type:"radio",id:"mode-global",enabled:!1,click:function(){return b.webContents.send("mode-changed","global")}},{label:"规则",type:"radio",id:"mode-rule",enabled:!1,click:function(){return b.webContents.send("mode-changed","rule")}},{label:"直连",type:"radio",id:"mode-direct",enabled:!1,click:function(){return b.webContents.send("mode-changed","direct")}},{label:"脚本",type:"radio",id:"mode-script",click:function(){return b.webContents.send("mode-changed","script")}},{type:"separator"},{label:"更多",submenu:[{label:"展示/隐藏开发者工具",click:function(){b.webContents.toggleDevTools()}},{label:"强制退出",click:function(){a.app.isQuiting=!0,a.app.quit()}}]},{type:"separator"},{label:"退出",click:function(){return b.webContents.send("app-exit")}}]),a.ipcMain.on("clash-core-status-change",function(d,a){var b=l.getMenuItemById("system-proxy"),c;b&&(b.enabled=1!==a),c=l.getMenuItemById("mixin"),c&&(c.enabled=1!==a),["global","rule","direct","script"].forEach(function(c){var b=l.getMenuItemById("mode-".concat(c));b&&(b.enabled=1!==a)})}),a.ipcMain.on("mode-changed",function(d,b){var c="mode-".concat(b),a=l.getMenuItemById(c);a&&(a.checked=!0)}),a.ipcMain.on("system-proxy-changed",function(c,b){var a=l.getMenuItemById("system-proxy");a&&(a.checked=b)}),a.ipcMain.on("mixin-changed",function(c,b){var a=l.getMenuItemById("mixin");a&&(a.checked=b)}),a.ipcMain.on("speed-update",function(x,v,b){var h=Math.ceil,t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"#fff",l,m,o,p,s,r,c,k,u,e,q;try{if(f){if(l=a.nativeImage.createFromDataURL(v),"win32"===process.platform){if(60===b)return void(d&&(d.destroy(),d=null,j=0));if(m=l.crop({x:0,y:0,width:b+8,height:69}),o=g.join(a.app.getPath("temp"),"cfw-sub.html"),p=m.getSize(),s=p.width,r=p.height,i.writeFileSync(o,'\n          <body style="background-color:'.concat(t,';overflow:hidden;-webkit-app-region:drag;margin:0;width:100%;height:100%;box-sizing:border-box;">\n            <img style="height:100%;width:100%;" src="').concat(m.toDataURL(),'" />\n          </body>\n          ')),!d){try{u=w(),e=u.subBounds,c=e.x,k=e.y}catch(a){}(d=new a.BrowserWindow({x:c,y:k,show:!0,alwaysOnTop:!0,closable:!1,focusable:!1,frame:!1,useContentSize:!0,maximizable:!1,transparent:!0,minimizable:!1,resizable:!1})).on("moved",function(){n()}),d.loadFile(o)}d.show(),d.reload(),j!==b&&d.setBounds({height:h(r/2.8),width:h(s/2.8)}),j=b}"darwin"===process.platform&&(q=l.crop({x:0,y:0,width:b,height:69}).resize({height:23}),q.setTemplateImage(!0),f.setImage(q))}}catch(a){}}),f.on("right-click",function(){f.popUpContextMenu(l)}),t=[{label:a.app.name,submenu:[{role:"about"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{label:"Close",accelerator:"Command+W",click:function(){b.close()}},{type:"separator"},{label:"退出 Clash for Windows",accelerator:"Command+Q",click:function(){b.webContents.send("app-exit")}}]},{role:"editMenu"},{role:"viewMenu"},{role:"windowMenu"},{role:"help",submenu:[{label:"GitHub",click:function(){var a=k()(h.a.mark(function d(){var a,b;return h.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=c(0),b=a.shell,d.next=3,b.openExternal("https://github.com/Fndroid/clash_for_windows_pkg");case 3:case"end":return d.stop()}},d)}));return function(){return a.apply(this,arguments)}}()},{label:"Document",click:function(){var a=k()(h.a.mark(function d(){var a,b;return h.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=c(0),b=a.shell,d.next=3,b.openExternal("https://docs.cfw.lbyczf.com/");case 3:case"end":return d.stop()}},d)}));return function(){return a.apply(this,arguments)}}()}]}],a.Menu.setApplicationMenu(a.Menu.buildFromTemplate(t))}function x(e){var b=e.x,c=e.y,d;if(!a.screen.getAllDisplays().find(function(f){var a=f.bounds,d,e,g,h;if(a)return d=a.x,e=a.y,g=a.width,h=a.height,l.inRange(b,d,d+g)&&l.inRange(c,e,e+h)}))if(d=a.screen.getDisplayNearestPoint({x:b,y:c}).bounds,d)return{x:d.x,y:d.y};return{x:b,y:c}}function n(){try{i.writeFileSync(m,JSON.stringify({bounds:b.getBounds(),subBounds:d?d.getBounds():{}}))}catch(a){}}function w(){try{return JSON.parse(i.readFileSync(m,"utf8"))}catch(a){}return{}}c.r(B),u=c(1),h=c.n(u),t=c(2),k=c.n(t),s=c(4),r=c.n(s),a=c(0),p=(c.n(a),c(0).TouchBar),e=p.TouchBarButton,g=c(3),i=c(7),l=c(8),v=c(9),c(10).initialize(),global.__static=c(3).join(__dirname,"/static").replace(/\\/g,"\\\\"),v(),a.app.disableHardwareAcceleration(),a.app.commandLine.appendSwitch("disable-features","OutOfBlinkCors"),"darwin"===process.platform&&a.app.dock.hide(),m=g.join(a.app.getPath("userData"),"window_ocnfig.json"),A="file://".concat(__dirname,"/index.html"),q=a.app.requestSingleInstanceLock(),a.app.setAppUserModelId("com.lbyczf.clashwin"),a.app.setAsDefaultProtocolClient("clash"),a.app.setName("Clash for Windows"),a.app.setAboutPanelOptions({version:""}),a.app.on("open-url",function(c,a){b.webContents.send("app-open",[a])}),q?(a.app.on("second-instance",function(c,a){b&&(b.webContents.send("app-open",a),b.isMinimized()&&b.restore(),b.show())}),a.app.on("ready",function(){a.powerMonitor.on("shutdown",function(c){c.preventDefault(),b.webContents.send("app-exit"),setTimeout(function(){a.app.isQuiting=!0,a.app.quit()},5e3)}),y()})):a.app.quit(),a.app.on("activate",function(){null===b?y():b.show()})},function(b){var a=function(b){"use strict";var q,c,k,h,z,m,w,y,p,g,a,n,l,i,d;function e(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}),a[b]}function x(c,a,d,e){var f=a&&a.prototype instanceof r?a:r,b=Object.create(f.prototype),g=new u(e||[]);return b._invoke=D(c,d,g),b}function s(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function r(){}function j(){}function f(){}function B(a){["next","throw","return"].forEach(function(b){e(a,b,function(a){return this._invoke(b,a)})})}function o(e,b){function a(k,j,f,g){var h=s(e[k],e,j),i,d;if("throw"!==h.type)return i=h.arg,d=i.value,d&&"object"==typeof d&&c.call(d,"__await")?b.resolve(d.__await).then(function(b){a("next",b,f,g)},function(b){a("throw",b,f,g)}):b.resolve(d).then(function(a){i.value=a,f(i)},function(b){return a("throw",b,f,g)});g(h.arg)}var d;this._invoke=function(e,f){function c(){return new b(function(b,c){a(e,f,b,c)})}return d=d?d.then(c,c):c()}}function D(d,e,b){var c=w;return function(j,k){var i,h,f;if(c==p)throw new Error("Generator is already running");if(c==g){if("throw"===j)throw k;return{value:void 0,done:!0}}for(b.method=j,b.arg=k;;){if(i=b.delegate,i)if(h=A(i,b),h){if(h===a)continue;return h}if("next"===b.method)b.sent=b._sent=b.arg;else if("throw"===b.method){if(c==w)throw c=g,b.arg;b.dispatchException(b.arg)}else"return"===b.method&&b.abrupt("return",b.arg);if(c=p,f=s(d,e,b),"normal"===f.type){if(c=b.done?g:y,f.arg===a)continue;return{value:f.arg,done:b.done}}"throw"===f.type&&(c=g,b.method="throw",b.arg=f.arg)}}}function A(c,b){var f=c.iterator[b.method],e,d;if(void 0===f){if(b.delegate=null,"throw"===b.method){if(c.iterator.return&&(b.method="return",b.arg=void 0,A(c,b),"throw"===b.method))return a;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return a}return e=s(f,c.iterator,b.arg),"throw"===e.type?(b.method="throw",b.arg=e.arg,b.delegate=null,a):(d=e.arg,d?d.done?(b[c.resultName]=d.value,b.next=c.nextLoc,"return"!==b.method&&(b.method="next",b.arg=void 0),b.delegate=null,a):d:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,a))}function C(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function v(b){var a=b.completion||{};a.type="normal",delete a.arg,b.completion=a}function u(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(C,this),this.reset(!0)}function t(a){var d,b,e;if(a){if(d=a[h],d)return d.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length))return b=-1,e=function d(){for(;++b<a.length;)if(c.call(a,b))return d.value=a[b],d.done=!1,d;return d.value=void 0,d.done=!0,d},e.next=e}return{next:E}}function E(){return{value:void 0,done:!0}}q=Object.prototype,c=q.hasOwnProperty,k="function"==typeof Symbol?Symbol:{},h=k.iterator||"@@iterator",z=k.asyncIterator||"@@asyncIterator",m=k.toStringTag||"@@toStringTag";try{e({},"")}catch(a){e=function(a,b,c){return a[b]=c}}return b.wrap=x,w="suspendedStart",y="suspendedYield",p="executing",g="completed",a={},n={},n[h]=function(){return this},l=Object.getPrototypeOf,i=l&&l(l(t([]))),i&&i!==q&&c.call(i,h)&&(n=i),d=f.prototype=r.prototype=Object.create(n),j.prototype=d.constructor=f,f.constructor=j,j.displayName=e(f,m,"GeneratorFunction"),b.isGeneratorFunction=function(b){var a="function"==typeof b&&b.constructor;return!!a&&(a===j||"GeneratorFunction"===(a.displayName||a.name))},b.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,f):(a.__proto__=f,e(a,m,"GeneratorFunction")),a.prototype=Object.create(d),a},b.awrap=function(a){return{__await:a}},B(o.prototype),o.prototype[z]=function(){return this},b.AsyncIterator=o,b.async=function(e,d,f,g,a){void 0===a&&(a=Promise);var c=new o(x(e,d,f,g),a);return b.isGeneratorFunction(d)?c:c.next().then(function(a){return a.done?a.value:c.next()})},B(d),e(d,m,"Generator"),d[h]=function(){return this},d.toString=function(){return"[object Generator]"},b.keys=function(b){var a=[],c;for(c in b)a.push(c);return a.reverse(),function c(){for(;a.length;){var d=a.pop();if(d in b)return c.value=d,c.done=!1,c}return c.done=!0,c}},b.values=t,u.prototype={constructor:u,reset:function(b){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!b)for(var a in this)"t"===a.charAt(0)&&c.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(i){var d,e,a,g,f,h;function b(b,a){return g.type="throw",g.arg=i,d.next=b,a&&(d.method="next",d.arg=void 0),!!a}if(this.done)throw i;for(d=this,e=this.tryEntries.length-1;0<=e;--e){if(a=this.tryEntries[e],g=a.completion,"root"===a.tryLoc)return b("end");if(a.tryLoc<=this.prev)if(f=c.call(a,"catchLoc"),h=c.call(a,"finallyLoc"),f&&h){{if(this.prev<a.catchLoc)return b(a.catchLoc,!0);if(this.prev<a.finallyLoc)return b(a.finallyLoc)}}else if(f){if(this.prev<a.catchLoc)return b(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return b(a.finallyLoc)}}},abrupt:function(e,f){for(var d,g=this.tryEntries.length-1,b,h;0<=g;--g)if((d=this.tryEntries[g]).tryLoc<=this.prev&&c.call(d,"finallyLoc")&&this.prev<d.finallyLoc){b=d;break}return b&&("break"===e||"continue"===e)&&b.tryLoc<=f&&f<=b.finallyLoc&&(b=null),h=b?b.completion:{},h.type=e,h.arg=f,b?(this.method="next",this.next=b.finallyLoc,a):this.complete(h)},complete:function(b,c){if("throw"===b.type)throw b.arg;return"break"===b.type||"continue"===b.type?this.next=b.arg:"return"===b.type?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):"normal"===b.type&&c&&(this.next=c),a},finish:function(d){for(var b,c=this.tryEntries.length-1;0<=c;--c)if((b=this.tryEntries[c]).finallyLoc===d)return this.complete(b.completion,b.afterLoc),v(b),a},catch:function(d){for(var a,b=this.tryEntries.length-1,c,e;0<=b;--b)if((a=this.tryEntries[b]).tryLoc===d)return c=a.completion,"throw"===c.type&&(e=c.arg,v(a)),e;throw new Error("illegal catch attempt")},delegateYield:function(b,c,d){return this.delegate={iterator:t(b),resultName:c,nextLoc:d},"next"===this.method&&(this.arg=void 0),a}},b}(b.exports);try{regeneratorRuntime=a}catch(b){Function("r","regeneratorRuntime = r")(a)}},function(a){a.exports=require("fs")},function(a){a.exports=require("lodash")},function(a){a.exports=require("fix-path")},function(a,c,b){a.exports=b(11)},function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.initialize=void 0;var c=b(12);Object.defineProperty(a,"initialize",{enumerable:!0,get:function(){return c.initialize}})},function(z,d,e){"use strict";function q(a){const c=a[0]+"~"+a[1],b=k.get(c);if(void 0!==b){const a=b.deref();if(void 0!==a)return a}}var y=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(d,"__esModule",{value:!0}),d.initialize=d.isRemoteModuleEnabled=void 0;const x=e(13),c=y(e(14)),j=e(15),m=e(0),w=e(16).getElectronBinding("v8_util"),v=["length","name","arguments","caller","prototype"],k=new Map,u=new FinalizationRegistry(a=>{const b=a.id[0]+"~"+a.id[1],c=k.get(b);if(void 0!==c&&void 0===c.deref()&&(k.delete(b),!a.webContents.isDestroyed()))try{a.webContents.sendToFrame(a.frameId,"REMOTE_RENDERER_RELEASE_CALLBACK",a.id[0],a.id[1])}catch(a){console.warn(`sendToFrame() failed: ${a}`)}}),n=new WeakMap,o=function(a){let b=Object.getOwnPropertyNames(a);return"function"==typeof a&&(b=b.filter(a=>!v.includes(a))),b.map(c=>{const b=Object.getOwnPropertyDescriptor(a,c);let d,e=!1;return void 0===b.get&&"function"==typeof a[c]?d="method":((b.set||b.writable)&&(e=!0),d="get"),{name:c,enumerable:b.enumerable,writable:e,type:d}})},p=function(b){const a=Object.getPrototypeOf(b);return null===a||a===Object.prototype?null:{members:o(a),proto:p(a)}},a=function(e,f,b,g=!1){let d;switch(typeof b){case"object":d=b instanceof Buffer?"buffer":b&&b.constructor&&"NativeImage"===b.constructor.name?"nativeimage":Array.isArray(b)?"array":b instanceof Error?"error":j.isSerializableObject(b)?"value":j.isPromise(b)?"promise":Object.prototype.hasOwnProperty.call(b,"callee")&&null!=b.length?"array":g&&w.getHiddenValue(b,"simple")?"value":"object";break;case"function":d="function";break;default:d="value"}return"array"===d?{type:d,members:b.map(b=>a(e,f,b,g))}:"nativeimage"===d?{type:d,value:j.serialize(b)}:"object"===d||"function"===d?{type:d,name:b.constructor?b.constructor.name:"",id:c.default.add(e,f,b),members:o(b),proto:p(b)}:"buffer"===d?{type:d,value:b}:"promise"===d?(b.then(function(){},function(){}),{type:d,then:a(e,f,function(a,c){b.then(a,c)})}):"error"===d?{type:d,value:b,members:Object.keys(b).map(c=>({name:c,value:a(e,f,b[c])}))}:{type:"value",value:b}},g=function(b){const a=new Error(b);throw a.code="EBADRPC",a.errno=-72,a},r=(a,b)=>{let c="Attempting to call a function in a renderer window that has been closed or released."+`\nFunction provided here: ${n.get(b)}`;if(a instanceof x.EventEmitter){const d=a.eventNames().filter(c=>a.listeners(c).includes(b));0<d.length&&(c+=`\nRemote event names: ${d.join(", ")}`,d.forEach(c=>{a.removeListener(c,b)}))}console.warn(c)},t=(b,a)=>new Proxy(Object,{get:(c,b,d)=>"name"===b?a:Reflect.get(c,b,d)}),f=function(b,g,d,h){const e=function(h){switch(h.type){case"nativeimage":return j.deserialize(h.value);case"value":return h.value;case"remote-object":return c.default.get(h.id);case"array":return f(b,g,d,h.value);case"buffer":return Buffer.from(h.value.buffer,h.value.byteOffset,h.value.byteLength);case"promise":return Promise.resolve({then:e(h.then)});case"object":{const a="Object"===h.name?{}:Object.create({constructor:t(0,h.name)});for(const{name:b,value:c}of h.members)a[b]=e(c);return a}case"function-with-return-value":{const a=e(h.value);return function(){return a}}case"function":{const e=[d,h.id],f=q(e);if(void 0!==f)return f;const c=function(...f){let e=!1;if(!b.isDestroyed())try{e=!1!==b.sendToFrame(g,"REMOTE_RENDERER_CALLBACK",d,h.id,a(b,d,f))}catch(a){console.warn(`sendToFrame() failed: ${a}`)}e||r(this,c)};return n.set(c,h.location),Object.defineProperty(c,"length",{value:h.length}),function(a,c,d,b){const e=new WeakRef(b),f=a[0]+"~"+a[1];k.set(f,e),u.register(b,{id:a,webContents:c,frameId:d})}(e,b,g,c),c}default:throw new TypeError(`Unknown type: ${h.type}`)}};return h.map(e)},l=new WeakMap;d.isRemoteModuleEnabled=function(a){return l.has(a)||l.set(a,function(b){const a=b.getLastWebPreferences()||{};return null!=a.enableRemoteModule&&!!a.enableRemoteModule}(a)),l.get(a)};const b=function(b,c){m.ipcMain.on(b,(b,f,...g)=>{let e;if(d.isRemoteModuleEnabled(b.sender)){try{e=c(b,f,...g)}catch(c){e={type:"exception",value:a(b.sender,f,c)}}void 0!==e&&(b.returnValue=e)}else b.returnValue={type:"exception",value:a(b.sender,f,new Error("@electron/remote is disabled for this WebContents. Set {enableRemoteModule: true} in WebPreferences to enable it."))}})},h=function(a,c,...d){const b={sender:a,returnValue:void 0,defaultPrevented:!1};return m.app.emit(c,b,a,...d),a.emit(c,b,...d),b},i=function(b,c,a){a&&console.warn(`WebContents (${b.id}): ${c}`,a)};let s=!1;d.initialize=function(){if(s)throw new Error("electron-remote has already been initialized");s=!0,b("REMOTE_BROWSER_WRONG_CONTEXT_ERROR",function(b,e,c,d){const a=q([c,d]);void 0===a||r(b.sender,a)}),b("REMOTE_BROWSER_REQUIRE",function(d,e,b,f){i(d.sender,`remote.require('${b}')`,f);const c=h(d.sender,"remote-require",b);if(void 0===c.returnValue){if(c.defaultPrevented)throw new Error(`Blocked remote.require('${b}')`);c.returnValue=process.mainModule.require(b)}return a(d.sender,e,c.returnValue)}),b("REMOTE_BROWSER_GET_BUILTIN",function(d,f,b,g){i(d.sender,`remote.getBuiltin('${b}')`,g);const c=h(d.sender,"remote-get-builtin",b);if(void 0===c.returnValue){if(c.defaultPrevented)throw new Error(`Blocked remote.getBuiltin('${b}')`);c.returnValue=e(0)[b]}return a(d.sender,f,c.returnValue)}),b("REMOTE_BROWSER_GET_GLOBAL",function(d,e,b,f){i(d.sender,`remote.getGlobal('${b}')`,f);const c=h(d.sender,"remote-get-global",b);if(void 0===c.returnValue){if(c.defaultPrevented)throw new Error(`Blocked remote.getGlobal('${b}')`);c.returnValue=global[b]}return a(d.sender,e,c.returnValue)}),b("REMOTE_BROWSER_GET_CURRENT_WINDOW",function(b,d,e){i(b.sender,"remote.getCurrentWindow()",e);const c=h(b.sender,"remote-get-current-window");if(void 0===c.returnValue){if(c.defaultPrevented)throw new Error("Blocked remote.getCurrentWindow()");c.returnValue=b.sender.getOwnerBrowserWindow()}return a(b.sender,d,c.returnValue)}),b("REMOTE_BROWSER_GET_CURRENT_WEB_CONTENTS",function(b,d,e){i(b.sender,"remote.getCurrentWebContents()",e);const c=h(b.sender,"remote-get-current-web-contents");if(void 0===c.returnValue){if(c.defaultPrevented)throw new Error("Blocked remote.getCurrentWebContents()");c.returnValue=b.sender}return a(b.sender,d,c.returnValue)}),b("REMOTE_BROWSER_CONSTRUCTOR",function(b,e,h,d){d=f(b.sender,b.frameId,e,d);const i=c.default.get(h);return null==i&&g(`Cannot call constructor on missing remote object ${h}`),a(b.sender,e,new i(...d))}),b("REMOTE_BROWSER_FUNCTION_CALL",function(b,h,i,d){d=f(b.sender,b.frameId,h,d);const e=c.default.get(i);null==e&&g(`Cannot call function on missing remote object ${i}`);try{return a(b.sender,h,e(...d),!0)}catch(a){const b=new Error(`Could not call remote function '${e.name||"anonymous"}'. Check that the function signature is correct. Underlying error: ${a.message}\nUnderlying stack: ${a.stack}\n`);throw b.cause=a,b}}),b("REMOTE_BROWSER_MEMBER_CONSTRUCTOR",function(b,e,h,i,d){d=f(b.sender,b.frameId,e,d);const j=c.default.get(h);return null==j&&g(`Cannot call constructor '${i}' on missing remote object ${h}`),a(b.sender,e,new j[i](...d))}),b("REMOTE_BROWSER_MEMBER_CALL",function(b,h,i,d,e){e=f(b.sender,b.frameId,h,e);const j=c.default.get(i);null==j&&g(`Cannot call method '${d}' on missing remote object ${i}`);try{return a(b.sender,h,j[d](...e),!0)}catch(a){const b=new Error(`Could not call remote method '${d}'. Check that the method signature is correct. Underlying error: ${a.message}\nUnderlying stack: ${a.stack}\n`);throw b.cause=a,b}}),b("REMOTE_BROWSER_MEMBER_SET",function(b,i,d,e,a){a=f(b.sender,b.frameId,i,a);const h=c.default.get(d);return null==h&&g(`Cannot set property '${e}' on missing remote object ${d}`),h[e]=a[0],null}),b("REMOTE_BROWSER_MEMBER_GET",function(f,h,b,d){const e=c.default.get(b);return null==e&&g(`Cannot get property '${d}' on missing remote object ${b}`),a(f.sender,h,e[d])}),b("REMOTE_BROWSER_DEREFERENCE",function(a,b,d){c.default.remove(a.sender,b,d)}),b("REMOTE_BROWSER_CONTEXT_RELEASE",(a,b)=>(c.default.clear(a.sender,b),null))}},function(a){a.exports=require("events")},function(c,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});const a=(a,b)=>`${a.id}-${b}`;b.default=new class{constructor(){this.nextId=0,this.storage={},this.owners={},this.electronIds=new WeakMap}add(d,e,g){const b=this.saveToStorage(g),f=a(d,e);let c=this.owners[f];return c||(c=this.owners[f]=new Map,this.registerDeleteListener(d,e)),c.has(b)||(c.set(b,0),this.storage[b].count++),c.set(b,c.get(b)+1),b}get(b){const a=this.storage[b];if(null!=a)return a.object}remove(d,e,b){const f=a(d,e),c=this.owners[f];if(c&&c.has(b)){const a=c.get(b)-1;0>=a?(c.delete(b),this.dereference(b)):c.set(b,a)}}clear(d,e){const b=a(d,e),c=this.owners[b];if(c){for(const a of c.keys())this.dereference(a);delete this.owners[b]}}saveToStorage(b){let a=this.electronIds.get(b);return a||(a=++this.nextId,this.storage[a]={count:0,object:b},this.electronIds.set(b,a)),a}dereference(b){const a=this.storage[b];null==a||(a.count-=1,0===a.count&&(this.electronIds.delete(a.object),delete this.storage[b]))}registerDeleteListener(a,b){const d=b.split("-")[0],c=(f,e)=>{e&&e.toString()===d&&(a.removeListener("render-view-deleted",c),this.clear(a,b))};a.on("render-view-deleted",c)}}},function(g,a,d){"use strict";function b(a){return null===a||ArrayBuffer.isView(a)||f.some(b=>a instanceof b)}Object.defineProperty(a,"__esModule",{value:!0}),a.deserialize=a.serialize=a.isSerializableObject=a.isPromise=void 0;const e=d(0);a.isPromise=function(a){return a&&a.then&&a.then instanceof Function&&a.constructor&&a.constructor.reject&&a.constructor.reject instanceof Function&&a.constructor.resolve&&a.constructor.resolve instanceof Function};const f=[Boolean,Number,String,Date,Error,RegExp,ArrayBuffer];a.isSerializableObject=b;const c=function(a,b){const c=Object.entries(a).map(([a,c])=>[a,b(c)]);return Object.fromEntries(c)};a.serialize=function d(a){return a&&a.constructor&&"NativeImage"===a.constructor.name?function(a){const b=[],c=a.getScaleFactors();if(1===c.length){const d=c[0],e=a.getSize(d),f=a.toBitmap({scaleFactor:d});b.push({scaleFactor:d,size:e,buffer:f})}else for(const c of d){const d=a.getSize(c),e=a.toDataURL({scaleFactor:c});b.push({scaleFactor:c,size:d,dataURL:e})}return{__ELECTRON_SERIALIZED_NativeImage__:!0,representations:b}}(a):Array.isArray(a)?a.map(d):b(a)?a:a instanceof Object?c(a,d):a},a.deserialize=function d(a){return a&&a.__ELECTRON_SERIALIZED_NativeImage__?function(b){const a=e.nativeImage.createEmpty();if(1===b.representations.length){const{buffer:c,size:d,scaleFactor:e}=b.representations[0],{width:f,height:g}=d;a.addRepresentation({buffer:c,scaleFactor:e,width:f,height:g})}else for(const c of b.representations){const{dataURL:b,size:d,scaleFactor:e}=c,{width:f,height:g}=d;a.addRepresentation({dataURL:b,scaleFactor:e,width:f,height:g})}return a}(a):Array.isArray(a)?a.map(d):b(a)?a:a instanceof Object?c(a,d):a}},function(b,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getElectronBinding=void 0,a.getElectronBinding=process.electronBinding?a=>process.electronBinding(a):a=>process._linkedBinding("electron_common_"+a)}])